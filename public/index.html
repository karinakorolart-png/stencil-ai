<h1>Pildi võrdlus – Stencil Generator</h1>

<input type="file" id="fileInput" accept="image/*">
<button id="generateBtn">Genereeri stencil</button>

<div id="result"></div>

<script>
document.getElementById("generateBtn").addEventListener("click", async () => {
  const file = document.getElementById("fileInput").files[0];
  if (!file) {
    alert("Vali fail kõigepealt!");
    return;
  }

  const formData = new FormData();
  formData.append("image", file);

  const res = await fetch("/generate-stencil", {
    method: "POST",
    body: formData
  });

  const data = await res.json();
  if (data.output_url) {
    document.getElementById("result").innerHTML = `
      <h3>Tulemus:</h3>
      <img src="${data.output_url}" style="max-width:100%;border:1px solid #333;">
    `;
  } else {
    alert("Viga: " + (data.error || "Midagi läks valesti."));
  }
});
</script>
